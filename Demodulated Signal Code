%% code for demodulated signal
% --- 1. System Parameters ---
fc = 10e3;  % Carrier Frequency (10 kHz)
fs = 80e3;  % Sampling Frequency (80 kHz)
t = (0:1/fs:0.01)'; % Time vector for 10ms duration

% --- 2. Message Signal (s) ---
% Create a two-tone sinusoidal signal with frequencies 300 and 600 Hz.
s = sin(2*pi*300*t) + 2*sin(2*pi*600*t);

% --- 3. Filter Design ---
% Create a 10th-order Butterworth lowpass filter for the demodulator.
% The cutoff frequency is set to fc*2/fs (normalized).
[num,den] = butter(10, fc*2/fs);

% --- 4. Modulation ---
% Amplitude modulate the signal s (Standard AM).
y = ammod(s, fc, fs);

% --- 5. Demodulation ---
% Demodulate the received signal y using Envelope Detection (amdemod).
% The two zeros correspond to default initial phase and carrier amplitude.
% num and den apply the low-pass filter to the recovered signal.
z = amdemod(y, fc, fs, 0, 0, num, den);

% --- 6. Plotting: Focus on Demodulated Output ---
figure;
% Plot the demodulated signal (z) in blue
plot(t, z, 'b');

% Add the original signal (s) for visual comparison, using a dashed line.
% This helps assess the quality and delay introduced by the demodulator.
hold on;
plot(t, s, 'r--'); 
hold off;

title('Demodulated Signal vs. Original Message Signal');
xlabel('Time (s)');
ylabel('Amplitude (Volts)');
legend('Demodulated Signal (z)', 'Original Message Signal (s)');
grid on;
axis tight;
